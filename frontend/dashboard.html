<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Base App</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="logo">Base App</h1>
            <div class="nav-menu">
                <a href="#messages-section" class="nav-link">Messages</a>
                <div class="nav-actions">
                    <button class="icon-button" id="messages-button" type="button" title="Messages">
                        <span class="nav-icon">
                            <svg viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M21 6.5c0-1.4-1.1-2.5-2.5-2.5h-13C4.1 4 3 5.1 3 6.5v7C3 14.9 4.1 16 5.5 16H7v3l4-3h7.5c1.4 0 2.5-1.1 2.5-2.5v-7z"></path>
                            </svg>
                        </span>
                        <span class="icon-badge" id="messages-badge"></span>
                    </button>
                    <div class="nav-notifications">
                        <button class="icon-button" id="notifications-button" type="button" title="Notifications">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24" aria-hidden="true">
                                    <path d="M12 22a2.5 2.5 0 0 0 2.4-2H9.6A2.5 2.5 0 0 0 12 22zm6-6V11c0-3.3-2.1-6.1-5-7V3a1 1 0 1 0-2 0v1c-2.9.9-5 3.7-5 7v5l-2 2v1h16v-1l-2-2z"></path>
                                </svg>
                            </span>
                            <span class="icon-badge" id="notifications-badge"></span>
                        </button>
                        <div class="dropdown-menu notifications-menu" id="notifications-menu">
                            <div class="notifications-header">
                                <span>Notifications</span>
                                <button class="text-button" id="mark-notifications-read">Mark all read</button>
                            </div>
                            <div id="notifications-list" class="notifications-list">
                                <div class="muted-text">No notifications.</div>
                            </div>
                        </div>
                    </div>
                </div>
                <span class="user-name" id="user-name"></span>
                <div class="profile-dropdown">
                    <img src="" alt="Avatar" class="profile-icon" id="profile-icon">
                    <div class="dropdown-menu" id="dropdown-menu">
                        <a href="#" id="profile-link">Profile</a>
                        <a href="settings.html">Settings</a>
                        <a href="#" id="logout-link">Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="page-header">
            <h2>My Dashboard</h2>
            <button class="btn btn-primary" id="add-item-btn">+ Add Item</button>
        </div>

        <div id="message" class="message"></div>

        <div class="dashboard-controls">
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Search dashboard items, messages, users..." class="search-input">
                <button class="btn btn-secondary" id="advanced-search-btn" type="button">Advanced</button>
            </div>
            <div id="search-filters" class="search-filters" style="display: none;">
                <select id="search-type" class="form-control">
                    <option value="all">All</option>
                    <option value="dashboard_items">Dashboard Items</option>
                    <option value="messages">Messages</option>
                    <option value="users">Users</option>
                    <option value="notifications">Notifications</option>
                    <option value="locations">Locations</option>
                </select>
                <input type="text" id="search-location" placeholder="Location" class="form-control">
                <input type="text" id="search-country" placeholder="Country" class="form-control">
                <input type="text" id="search-city" placeholder="City" class="form-control">
                <input type="date" id="search-date-from" class="form-control" placeholder="From Date">
                <input type="date" id="search-date-to" class="form-control" placeholder="To Date">
                <button class="btn btn-primary" id="apply-search-filters" type="button">Apply</button>
                <button class="btn btn-secondary" id="clear-search-filters" type="button">Clear</button>
            </div>
            <div id="search-results" class="search-results" style="display: none;">
                <div class="search-results-header">
                    <h3>Search Results</h3>
                    <button class="btn btn-secondary" id="close-search-results" type="button">Close</button>
                </div>
                <div id="search-results-content" class="search-results-content"></div>
            </div>
        </div>

        <div id="items-list" class="items-list">
            <div class="loading">Loading...</div>
        </div>

        <div class="section" id="messages-section">
            <div class="messages-header">
                <h3>Messages</h3>
            </div>
            <div class="messages-layout">
                <div class="messages-sidebar">
                    <div class="message-search">
                        <input type="text" id="message-search-input" placeholder="Search users...">
                        <button class="btn btn-secondary" id="message-search-btn" type="button">Search</button>
                    </div>
                    <div id="message-search-results" class="messages-list"></div>
                    <h4 class="messages-subtitle">Conversations</h4>
                    <div id="conversation-list" class="messages-list">
                        <div class="muted-text">No conversations yet.</div>
                    </div>
                </div>
                <div class="messages-thread">
                    <div id="message-thread" class="message-thread">
                        <div class="muted-text">Select a conversation to view messages.</div>
                    </div>
                    <form id="message-form" class="message-form">
                        <input type="hidden" id="message-recipient-id">
                        <textarea id="message-content" rows="3" placeholder="Write a message..." required></textarea>
                        <button type="submit" class="btn btn-primary">Send</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Item Modal -->
    <div id="item-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modal-title">Add Item</h2>
            <form id="item-form">
                <input type="hidden" id="item-id">
                <div class="form-group">
                    <label>Title *</label>
                    <input type="text" id="item-title" required>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="item-description" rows="4"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-btn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
